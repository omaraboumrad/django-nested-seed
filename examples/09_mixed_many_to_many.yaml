# Model with Mixed ManyToMany (References + Inline)
# Mix references to existing objects with inline object definitions
#
# Models:
# -------
# from django.contrib.auth.models import User
#
# class Category(models.Model):
#     name = models.CharField(max_length=100)
#     slug = models.SlugField(unique=True)
#
# class Publisher(models.Model):
#     name = models.CharField(max_length=100)
#     country = models.CharField(max_length=100)
#
# class Author(models.Model):
#     user = models.ForeignKey(User, on_delete=models.CASCADE, related_name="authors")
#     pen_name = models.CharField(max_length=100)
#     bio = models.TextField()
#
# class Book(models.Model):
#     title = models.CharField(max_length=200)
#     author = models.ForeignKey(Author, on_delete=models.CASCADE, related_name="books")
#     publisher = models.ForeignKey(Publisher, on_delete=models.CASCADE, related_name="books")
#     categories = models.ManyToManyField(Category, related_name="books")
#     status = models.CharField(max_length=20, choices=STATUS_CHOICES)

testapp:
  Category:
    - $ref: python
      name: "Python"
      slug: "python"

  Book:
    - title: "Django Best Practices"
      author:
        user:
          username: "john"
          email: "john@example.com"
        pen_name: "John Smith"
        bio: "Django expert"
      publisher:
        name: "Tech Press"
        country: "USA"
      status: "PUBLISHED"
      categories:
        - "$python"  # Referenced category
        - name: "Django"  # Inline category
          slug: "django"
        - name: "Web Frameworks"  # Another inline category
          slug: "web-frameworks"
