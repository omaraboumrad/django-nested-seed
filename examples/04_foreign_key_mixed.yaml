# Model with ForeignKey (Mixed)
# Combine nested and referenced ForeignKeys in the same structure
#
# Models:
# -------
# from django.contrib.auth.models import User
#
# class Publisher(models.Model):
#     name = models.CharField(max_length=100)
#     country = models.CharField(max_length=100)
#
# class Author(models.Model):
#     user = models.ForeignKey(User, on_delete=models.CASCADE, related_name="authors")
#     pen_name = models.CharField(max_length=100)
#     bio = models.TextField()
#
# class Book(models.Model):
#     title = models.CharField(max_length=200)
#     author = models.ForeignKey(Author, on_delete=models.CASCADE, related_name="books")
#     publisher = models.ForeignKey(Publisher, on_delete=models.CASCADE, related_name="books")
#     status = models.CharField(max_length=20, choices=STATUS_CHOICES)

testapp:
  Publisher:
    - $ref: oreilly
      name: "O'Reilly Media"
      country: "USA"

  Author:
    - $ref: alice
      user:
        username: "alice"
        email: "alice@example.com"
      pen_name: "Alice Smith"
      bio: "Software engineer"

  Book:
    - title: "Python Patterns"
      author: "$alice"  # Referenced FK
      publisher:  # Nested FK
        name: "Tech Books Inc"
        country: "UK"
      status: "PUBLISHED"
